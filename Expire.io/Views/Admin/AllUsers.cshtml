
@{
    ViewData["Title"] = "AllUsers";
}
@model System.Collections.Generic.IEnumerable<Expire.io.DTOs.UserDTORolesList>
@using  Expire.io.DTOs;

<div class="container" style="margin-top: 50px">
    <div class="row" style="margin: 20px">
       <button onclick="location.href = '@Url.Action("CreateUser", "Admin")'">Create User</button>
    </div>
    <ul class="list-group list-group-flush">
        @{
            foreach (Expire.io.DTOs.UserDTORolesList item in @Model)
            {
                <li class="list-group-item  list-group-item-info" id="@item.Id">
                    <div class="bmd-list-group-col" style="display: inline !important">
                        @{
                            if (@item.Roles.Where(r => r == "Admin").FirstOrDefault() != null)
                            {
                                <div style="width: 65%; display: inline-block">
                                    <p class="list-group-item-heading" style="font-size: 20px;font-weight: bold">@item.FirstName - @item.LastName</p>
                                    <p class="list-group-item-text" id="descriptionRole">Admin</p>
                                </div>
                                <div style="width: 25%; display: inline-block; vertical-align: top">
                                    <button type="button" onclick="deleteUser('@item.UserName.ToString()')" class="btn btn-danger" style="float: right">Delete User</button>
                                </div>
                            }
                            else
                            {
                                <div style="width: 65%; display: inline-block">
                                    <p class="list-group-item-heading" style="font-size: 20px;font-weight: bold">@item.FirstName - @item.LastName</p>
                                    <p class="list-group-item-text" id="descriptionRole">User</p>
                                </div>
                                <div style="width: 25%; display: inline-block; vertical-align: top">
                                    <button type="button" onclick="makeAnAdmin('@item.UserName.ToString()')" class="btn btn-secondary adminButton">Make an admin</button>
                                    <button type="button" onclick="deleteUser('@item.UserName.ToString()')" class="btn btn-danger" style="float: right">Delete User</button>
                                </div>
                            }
                        }
                    </div>
                </li>
            }
        }
    </ul>
</div>

